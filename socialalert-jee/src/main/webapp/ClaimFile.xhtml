<ui:composition template="/WEB-INF/templates/MasterTemplate.xhtml" 
	xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"> 
<ui:define name="content">
<p:importConstants type="com.bravson.socialalert.business.media.MediaConstants" var="MediaConstants" />
<f:metadata>
    	<f:viewParam name="uri" value="#{fileClaimView.selectedFile}" converter="#{fileInfoConverter}" id="uri" />
    	<f:event listener="#{fileClaimView.startConversation()}" type="preRenderView"></f:event>
</f:metadata>
<h:form>
	<p:growl id="messages" showDetail="true" sticky="false" life="2000" />
	<p:panel header="Publish">
		<h:panelGrid columns="3">
			<p:panelGrid columns="1">
				<h:panelGroup rendered="#{not fileClaimView.selectedFile.hasVideoPreview()}">
					<img src="rest/file/preview/#{fileClaimView.selectedFile.fileUri}" />
				</h:panelGroup>
				<h:panelGroup rendered="#{fileClaimView.selectedFile.hasVideoPreview()}">
					<video src="rest/file/preview/#{fileClaimView.selectedFile.fileUri}" controls="controls"/>
				</h:panelGroup>
			</p:panelGrid>
			
			<p:spacer width="20"></p:spacer>
			<h:panelGrid columns="2">
					   
			    <h:outputLabel value="Title:" for="title" /> 
			    <p:inputText value="#{fileClaimView.title}" id="title" label="Title" required="true" maxlength="#{MediaConstants.MAX_TITLE_LENGTH}"/>
			 
			    <h:outputText value="Tags:" for="tags" />
			    <p:chips value="#{fileClaimView.tags}" id="tags" max="#{MediaConstants.MAX_TAG_COUNT}"/>
			 
			    <h:outputLabel value="Categories" for="categories" max="#{MediaConstants.MAX_CATEGORY_COUNT}"/>
			    <p:selectManyButton value="#{fileClaimView.categories}" id="categories">
			            <f:selectItem itemLabel="Art" itemValue="ART" />
			            <f:selectItem itemLabel="Places" itemValue="PLACE" />
			            <f:selectItem itemLabel="News" itemValue="NEWS" />
			            <f:selectItem itemLabel="Party" itemValue="PARTY" />
			            <f:selectItem itemLabel="Awesome" itemValue="AWESOME" />
			            <f:selectItem itemLabel="Buzz" itemValue="BUZZ" />
			            <f:selectItem itemLabel="Nature" itemValue="NATURE" />
			            <f:selectItem itemLabel="Selfies" itemValue="SELFY" />
			    </p:selectManyButton>
			    
			    <h:outputLabel value="Description" for="description" maxlength="#{MediaConstants.MAX_DESCRIPTION_LENGTH}"/>
			    <p:inputTextarea value="#{fileClaimView.description}" rows="6" cols="50" id="description"/>
			    
				<p:button value="Cancel" outcome="UploadFile"/>
				<p:commandButton type="submit" value="Next" action="#{fileClaimView.updateLocation}" ajax="false"/>
			</h:panelGrid>
		</h:panelGrid>
	</p:panel>
</h:form>
</ui:define>
</ui:composition>