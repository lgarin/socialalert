<ui:composition template="/WEB-INF/templates/MasterTemplate.xhtml" 
	xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"> 
<ui:define name="content">
	<h:head>
		<script src="http://maps.google.com/maps/api/js?key=AIzaSyBWxkaqPv_cAbdPojte3XNzGSKuOzvQYps" type="text/javascript"></script>
	</h:head>
	<div class="ui-g">
		<div style="width: 810px">
			<p:gmap id="gmap" center="#{mediaMapView.mapCenterString}" zoom="#{mediaMapView.mapZoomLevel}" type="HYBRID" style="width:800px;height:750px" model="#{mediaMapView.mapModel}" >
				<p:ajax event="stateChange" listener="#{mediaMapView.onMapStateChange}" update="gmap topMedia" />
				<p:ajax event="overlaySelect" listener="#{mediaMapView.onRectangleSelect}" update="gmap topMedia" />
			</p:gmap>
		</div>
		<div>
			<p:dataScroller id="topMedia" var="media" value="#{mediaMapView.topMediaList}" chunkSize="2" mode="inline" scrollHeight="740">
				<p:panel header="#{media.title}" style="text-align:center">
					<h:panelGrid style="width:320px">
						<h:panelGroup class="ui-g">
							<div class="ui-g-6"><h:outputText styleClass="#{media.creator.online ? 'online' : 'offline'}" value="#{media.creator.username}" /></div>
							<div class="ui-g-6"><h:outputText value="#{media.timestamp}" converter="#{prettyInstantConverter}"/></div>
						</h:panelGroup>
					 	<h:link outcome="ShowMedia" title="View Detail">
			                <p:graphicImage url="/rest/file/thumbnail/#{media.mediaUri}"/> 
			                <f:param name="uri" value="#{media.mediaUri}"></f:param>
		                </h:link>
		                <h:panelGroup class="ui-g">
		                	<div class="ui-g-3"><span class="fa fa-thumbs-o-up"/><span> #{media.likeCount} </span></div>
		                	<div class="ui-g-3"><span class="fa fa-thumbs-o-down"/><span> #{media.dislikeCount} </span></div>
		                	<div class="ui-g-3"><span class="fa fa-eye"/><span> #{media.hitCount} </span></div>
		                	<div class="ui-g-3"><span class="fa fa-comments"/><span> #{media.commentCount} </span></div>
		                </h:panelGroup>
			        </h:panelGrid>
				</p:panel>
			</p:dataScroller>
		</div>
	</div>
</ui:define>
</ui:composition>
