<ui:composition template="/WEB-INF/templates/MasterTemplate.xhtml" 
	xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui">
<ui:define name="content">
<h:head>
	<script src="http://maps.google.com/maps/api/js?key=AIzaSyBWxkaqPv_cAbdPojte3XNzGSKuOzvQYps" type="text/javascript"></script>
</h:head>
<f:metadata>
	<f:viewParam name="uri" value="#{mediaView.selectedMedia}" converter="#{mediaDetailConverter}" id="uri" required="true" />
	<f:event listener="#{mediaView.initMapModel}" type="preRenderView"></f:event>
</f:metadata>
<h:form>
	<p:growl id="messages" showDetail="true" sticky="false" life="2000" />
	<p:panelGrid>
		<p:row>
			<p:column colspan="2"><p:commandButton value="Edit" action="#{mediaView.editMedia}"></p:commandButton></p:column>
			<p:column rowspan="15">
				<p:tabView>
					<p:tab title="Preview">
						<h:panelGroup rendered="#{not mediaView.selectedMedia.hasVideoPreview()}">
							<img src="rest/file/preview/#{mediaView.selectedMedia.mediaUri}" />
						</h:panelGroup>
						<h:panelGroup rendered="#{mediaView.selectedMedia.hasVideoPreview()}">
							<video src="rest/file/preview/#{mediaView.selectedMedia.mediaUri}" controls="controls"/>
						</h:panelGroup>
					</p:tab>
					<p:tab title="Map" rendered="#{mediaView.selectedMedia.hasLocation()}">
						<p:gmap center="#{mediaView.selectedMedia.latitude},#{mediaView.selectedMedia.longitude}" zoom="15" type="HYBRID" style="height:640px;width:960px" model="#{mediaView.mapModel}">
						</p:gmap>
					</p:tab>
				</p:tabView>
			</p:column>
		</p:row>
		<p:row>
			<p:column><h:outputText value="Title" /></p:column>
			<p:column><h:outputText value="#{mediaView.selectedMedia.title}" /></p:column>
		</p:row>
		<p:row>
			<p:column><h:outputText value="Categories" /></p:column>
			<p:column><h:outputText value="#{mediaView.selectedMedia.categories}" converter="#{arrayConverter}" /></p:column>
		</p:row>
		<p:row>
			<p:column><h:outputText value="Tags" /></p:column>
			<p:column><h:outputText value="#{mediaView.selectedMedia.tags}" converter="#{arrayConverter}" /></p:column>
		</p:row>
		<p:row>
			<p:column rowspan="2"><h:outputText value="Description" /></p:column>
			<p:column rowspan="2"><h:outputText value="#{mediaView.selectedMedia.description}" /></p:column>
		</p:row>
		<p:row>
		</p:row>
		<p:row>
			<p:column>
				<h:outputText value="Upload date" />
			</p:column>
			<p:column>
				<h:outputText value="#{mediaView.selectedMedia.timestamp}" converter="#{instantConverter}" />
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<h:outputText value="Date taken" />
			</p:column>
			<p:column>
				<h:outputText value="#{mediaView.selectedMedia.creation}" converter="#{instantConverter}" />
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<h:outputText value="Duration" />
			</p:column>
			<p:column>
				<h:outputText value="#{mediaView.selectedMedia.duration.seconds} sec" rendered="#{not empty mediaView.selectedMedia.duration}" />
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<h:outputText value="Format" />
			</p:column>
			<p:column>
				<h:outputText value="#{mediaView.selectedMedia.fileFormat.contentType}" />
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<h:outputText value="Camera" />
			</p:column>
			<p:column>
				<h:outputText value="#{mediaView.selectedMedia.cameraMaker} #{fileClaimView.selectedFile.cameraModel}" />
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<h:outputText value="Creator" />
			</p:column>
			<p:column>
				<h:outputText value="#{mediaView.selectedMedia.creator.username} #{mediaView.selectedMedia.creator.online ? '(online)' : '(offline)'}" />
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<h:outputText value="Hit count" />
			</p:column>
			<p:column>
				<h:outputText value="#{mediaView.selectedMedia.hitCount}" />
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<p:commandButton value="Likes" action="#{mediaView.likeMedia()}" ajax="false"/>
			</p:column>
			<p:column>
				<h:outputText value="#{mediaView.selectedMedia.likeCount}" />
			</p:column>
		</p:row>
		<p:row>
			<p:column>
				<p:commandButton value="Dislikes" action="#{mediaView.dislikeMedia()}" ajax="false"/>
			</p:column>
			<p:column>
				<h:outputText value="#{mediaView.selectedMedia.dislikeCount}" />
			</p:column>
		</p:row>
	</p:panelGrid>
</h:form>
</ui:define>
</ui:composition> 
